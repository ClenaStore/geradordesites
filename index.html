<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Gerador de Sites Simples</title>
  <style>
    body{font-family:Arial,sans-serif;background:#f5f5f5;padding:20px}
    .card{background:#fff;padding:15px;margin-bottom:15px;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.1)}
    input,textarea{width:100%;margin:5px 0;padding:8px}
    iframe{width:100%;height:300px;border:1px solid #ccc;margin-top:10px}
  </style>
</head>
<body>
  <h2>Gerador de Sites</h2>

  <div class="card">
    <label>Nome do Site</label>
    <input id="nome">
    <label>Slogan</label>
    <input id="slogan">
    <label>Cor Principal</label>
    <input type="color" id="cor" value="#4f46e5">
  </div>

  <div class="card">
    <label>Logo</label>
    <input type="file" id="logo" accept="image/*">
    <label>Banner</label>
    <input type="file" id="banner" accept="image/*">
    <label>Fotos do Carrossel</label>
    <input type="file" id="carrossel" accept="image/*" multiple>
  </div>

  <button onclick="gerarSite()">Pré-visualizar</button>

  <div class="card">
    <h3>Prévia:</h3>
    <iframe id="preview"></iframe>
  </div>

  <button onclick="salvar()">Salvar na Planilha</button>

<script>
let logoBase64="", bannerBase64="", carrosselBase64=[];

function fileToBase64(file){
  return new Promise((resolve,reject)=>{
    const reader=new FileReader();
    reader.onload=()=>resolve(reader.result);
    reader.onerror=reject;
    reader.readAsDataURL(file);
  });
}

document.getElementById("logo").addEventListener("change",async e=>{
  logoBase64 = await fileToBase64(e.target.files[0]);
});
document.getElementById("banner").addEventListener("change",async e=>{
  bannerBase64 = await fileToBase64(e.target.files[0]);
});
document.getElementById("carrossel").addEventListener("change",async e=>{
  carrosselBase64=[];
  for(const file of e.target.files){
    carrosselBase64.push(await fileToBase64(file));
  }
});

function gerarSite(){
  const nome=document.getElementById("nome").value;
  const slogan=document.getElementById("slogan").value;
  const cor=document.getElementById("cor").value;

  let carouselHTML="";
  carrosselBase64.forEach(img=>{
    carouselHTML+=`<img src="${img}" style="width:100%;max-height:200px;object-fit:cover;margin:5px 0">`;
  });

  const html=`
  <html>
  <head><style>
    body{margin:0;font-family:sans-serif;background:${cor};color:#fff;text-align:center}
    header{padding:20px}
    img{max-width:100%}
  </style></head>
  <body>
    <header>
      ${logoBase64?`<img src="${logoBase64}" height="50">`:""}
      <h1>${nome}</h1>
      <p>${slogan}</p>
    </header>
    <section>
      ${bannerBase64?`<img src="${bannerBase64}">`:""}
    </section>
    <section>${carouselHTML}</section>
  </body>
  </html>`;

  document.getElementById("preview").srcdoc=html;
}

function salvar(){
  const dados={
    nome:document.getElementById("nome").value,
    slogan:document.getElementById("slogan").value,
    cor:document.getElementById("cor").value,
    logo:logoBase64,
    banner:bannerBase64,
    carrossel:carrosselBase64
  };

  fetch("URL_DO_SEU_WEBAPP",{
    method:"POST",
    body:JSON.stringify(dados)
  }).then(r=>r.text()).then(res=>{
    alert("Salvo na planilha!");
  });
}
</script>
</body>
</html>
